{
  "type": "object",
  "title": "BingAds extractor row configuration",
  "required": [
    "destination",
    "object_type"
  ],
  "properties": {
    "object_type": {
      "title": "Object Type",
      "type": "string",
      "enum": [
        "entity",
        "report_prebuilt",
        "report_custom"
      ],
      "options": {
        "enum_titles": [
          "Entity",
          "Report (Prebuilt)",
          "Report (Custom)"
        ]
      },
      "default": "report_prebuilt",
      "propertyOrder": 1
    },
    "bulk_settings": {
      "type": "object",
      "title": "Entity Settings",
      "options": {
        "dependencies": {
          "object_type": [
            "entity"
          ]
        }
      },
      "required": [
        "download_entities",
        "since_last_sync_time"
      ],
      "properties": {
        "download_entities": {
          "type": "array",
          "title": "Entities",
          "format": "select",
          "options": {
            "async": {
              "label": "Re-load available entities",
              "action": "get_bulk_entities"
            }
          },
          "uniqueItems": true,
          "items": {
            "enum": [],
            "type": "string"
          },
          "default": [
            "Campaigns",
            "Ads"
          ],
          "description": "Comma separated list of entities to download, find supported entities in the <a href='https://learn.microsoft.com/en-us/advertising/bulk-service/downloadentity?view=bingads-13'>documentation</a>.",
          "propertyOrder": 3000
        },
        "since_last_sync_time": {
          "type": "boolean",
          "title": "Only download changes since the last run",
          "description": "If checked, only changes since the last component run will be downloaded. If checked for the first run of this component row, it will be ignored (i.e. all data will be downloaded).",
          "format": "checkbox",
          "default": true
        }
      },
      "additionalProperties": false,
      "propertyOrder": 20
    },
    "report_settings_custom": {
      "type": "object",
      "title": "Report Settings Custom",
      "required": [
        "report_type",
        "aggregation",
        "time_range",
        "return_only_complete_data",
        "columns_array",
        "primary_key_array"
      ],
      "options": {
        "dependencies": {
          "object_type": [
            "report_custom"
          ]
        }
      },
      "propertyOrder": 20,
      "properties": {
        "report_type": {
          "enum": [
            "AccountPerformance",
            "AdDynamicTextPerformance",
            "AdExtensionByAd",
            "AdExtensionByKeyword",
            "AdExtensionDetail",
            "AdGroupPerformance",
            "AdPerformance",
            "AgeGenderAudience",
            "AudiencePerformance",
            "BudgetSummary",
            "CallDetail",
            "CampaignPerformance",
            "ConversionPerformance",
            "DSAAutoTargetPerformance",
            "DSACategoryPerformance",
            "DSASearchQueryPerformance",
            "DestinationUrlPerformance",
            "GeographicPerformance",
            "GoalsAndFunnels",
            "KeywordPerformance",
            "NegativeKeywordConflict",
            "ProductDimensionPerformance",
            "ProductMatchCount",
            "ProductNegativeKeywordConflict",
            "ProductPartitionPerformance",
            "ProductPartitionUnitPerformance",
            "ProductSearchQueryPerformance",
            "ProfessionalDemographicsAudience",
            "PublisherUsagePerformance",
            "SearchCampaignChangeHistory",
            "SearchQueryPerformance",
            "ShareOfVoice",
            "UserLocationPerformance"
          ],
          "type": "string",
          "title": "Report type",
          "default": "Object",
          "description": "Select one of the available report types described in the <a href='https://learn.microsoft.com/en-us/advertising/guides/report-types?view=bingads-13'>offical documentation</a>",
          "propertyOrder": 10
        },
        "aggregation": {
          "title": "Report Aggregation",
          "description": "The type of aggregation to use to aggregate the report data.",
          "type": "string",
          "enum": [
            "Daily",
            "DayOfWeek",
            "Hourly",
            "HourOfDay",
            "Monthly",
            "Weekly",
            "WeeklyStartingMonday",
            "Yearly",
            "Summary"
          ],
          "default": "Daily",
          "propertyOrder": 20
        },
        "time_range": {
          "$ref": "#/definitions/time_range",
          "propertyOrder": 30
        },
        "return_only_complete_data": {
          "$ref": "#/definitions/return_only_complete_data",
          "propertyOrder": 40
        },
        "columns_array": {
          "type": "array",
          "title": "Columns",
          "items": {
            "enum": [],
            "type": "string"
          },
          "format": "select",
          "options": {
            "async": {
              "label": "Re-load available columns",
              "action": "get_report_columns"
            }
          },
          "uniqueItems": true,
          "description": "Comma separated list of columns to use for the report. ",
          "propertyOrder": 50
        },
        "primary_key_array": {
          "type": "array",
          "title": "Primary Key",
          "description": "List of columns (from selected dimensions) to be used as primary key of the resulting table. We recommend using ID columns where possible, to avoid ambiguity in case the dimension name is changed.",
          "propertyOrder": 60,
          "format": "select",
          "uniqueItems": true,
          "items": {
            "type": "string",
            "watch": {
              "dim": "report_settings_custom.columns_array"
            },
            "enumSource": "dim"
          }
        }
      }
    },
    "report_settings_prebuilt": {
      "type": "object",
      "title": "Report Settings",
      "required": [
        "preset_name",
        "aggregation",
        "time_range",
        "return_only_complete_data"
      ],
      "options": {
        "dependencies": {
          "object_type": [
            "report_prebuilt"
          ]
        }
      },
      "propertyOrder": 20,
      "properties": {
        "preset_name": {
          "enum": [
            "AccountPerformance",
            "AccountImpressionPerformance",
            "AdGroupPerformance",
            "AdGroupImpressionPerformance",
            "CampaignPerformance",
            "CampaignImpressionPerformance",
            "ProductDimensionPerformance",
            "KeywordPerformance",
            "GeographicPerformance",
            "AssePerformance",
            "AssetGroupPerformance"
          ],
          "type": "string",
          "title": "Preset Name",
          "default": "Object",
          "description": "Select one of the available report presets. The columns and primary key that will be used for each preset are described in <a href='https://github.com/keboola/component-bingads-ex/blob/main/docs/report_presets_columns_and_pk.md'>this markdown file</a>.",
          "propertyOrder": 10
        },
        "aggregation": {
          "title": "Report aggregation",
          "description": "The type of aggregation to use to aggregate the report data. Only hourly and daily aggregation is available for prebuilt reports.",
          "type": "string",
          "enum": [
            "Daily",
            "Hourly"
          ],
          "default": "Daily",
          "propertyOrder": 20
        },
        "time_range": {
          "$ref": "#/definitions/time_range",
          "propertyOrder": 30
        },
        "return_only_complete_data": {
          "$ref": "#/definitions/return_only_complete_data",
          "propertyOrder": 40
        }
      }
    },
    "destination": {
      "type": "object",
      "title": "Destination",
      "required": [
        "output_table_name",
        "load_type"
      ],
      "properties": {
        "load_type": {
          "enum": [
            "full_load",
            "incremental_load"
          ],
          "type": "string",
          "title": "Load Type",
          "default": "incremental_load",
          "options": {
            "enum_titles": [
              "Full Load",
              "Incremental Load"
            ]
          },
          "description": "If Full load is used, the destination table will be overwritten every run. If Incremental Load is used, data will be upserted into the destination table.",
          "propertyOrder": 10
        },
        "output_table_name": {
          "type": "string",
          "title": "Storage Table Name",
          "description": "Name of the table stored in Storage. Default object name used if left empty.",
          "propertyOrder": 20
        }
      },
      "propertyOrder": 1000
    }
  },
  "definitions": {
    "time_range": {
      "type": "object",
      "title": "Time Range",
      "propertyOrder": 20,
      "required": [
        "time_zone",
        "period"
      ],
      "properties": {
        "time_zone": {
          "type": "string",
          "title": "Report Time Zone",
          "propertyOrder": 10,
          "description": "Determines the time zone that is used to establish today's date.",
          "enum": [
            "AbuDhabiMuscat",
            "Adelaide",
            "Alaska",
            "AlmatyNovosibirsk",
            "AmsterdamBerlinBernRomeStockholmVienna",
            "Arizona",
            "AstanaDhaka",
            "AthensIslandanbulMinsk",
            "AtlanticTimeCanada",
            "AucklandWellington",
            "Azores",
            "Baghdad",
            "BakuTbilisiYerevan",
            "BangkokHanoiJakarta",
            "BeijingChongqingHongKongUrumqi",
            "BelgradeBratislavaBudapestLjubljanaPrague",
            "BogotaLimaQuito",
            "Brasilia",
            "Brisbane",
            "BrusselsCopenhagenMadridParis",
            "Bucharest",
            "BuenosAiresGeorgetown",
            "Cairo",
            "CanberraMelbourneSydney",
            "CapeVerdeIsland",
            "CaracasLaPaz",
            "CasablancaMonrovia",
            "CentralAmerica",
            "CentralTimeUSCanada",
            "ChennaiKolkataMumbaiNewDelhi",
            "ChihuahuaLaPazMazatlan",
            "Darwin",
            "EasternTimeUSCanada",
            "Ekaterinburg",
            "FijiKamchatkaMarshallIsland",
            "Greenland",
            "GreenwichMeanTimeDublinEdinburghLisbonLondon",
            "GuadalajaraMexicoCityMonterrey",
            "GuamPortMoresby",
            "HararePretoria",
            "Hawaii",
            "HelsinkiKyivRigaSofiaTallinnVilnius",
            "Hobart",
            "IndianaEast",
            "InternationalDateLineWest",
            "IrkutskUlaanBataar",
            "IslandamabadKarachiTashkent",
            "Jerusalem",
            "Kabul",
            "Kathmandu",
            "Krasnoyarsk",
            "KualaLumpurSingapore",
            "KuwaitRiyadh",
            "MagadanSolomonIslandNewCaledonia",
            "MidAtlantic",
            "MidwayIslandandSamoa",
            "MoscowStPetersburgVolgograd",
            "MountainTimeUSCanada",
            "Nairobi",
            "Newfoundland",
            "Nukualofa",
            "OsakaSapporoTokyo",
            "PacificTimeUSCanadaTijuana",
            "Perth",
            "Rangoon",
            "Santiago",
            "SarajevoSkopjeWarsawZagreb",
            "Saskatchewan",
            "Seoul",
            "SriJayawardenepura",
            "Taipei",
            "Tehran",
            "Vladivostok",
            "WestCentralAfrica",
            "Yakutsk"
          ],
          "options": {
            "enum_titles": [
              "Abu Dhabi and Muscat",
              "Adelaide, Australia",
              "Alaska",
              "Almaty and Novosibirsk",
              "Amsterdam, Berlin, Bern, Rome, Stockholm, and Vienna",
              "Arizona",
              "Astana and Dhaka",
              "Athens, Istanbul, Beirut, and Minsk",
              "Atlantic Time and Canada",
              "Auckland and Wellington, New Zealand",
              "Azores",
              "Baghdad",
              "Baku, Tbilisi, and Yerevan",
              "Bangkok, Hanoi, and Jakarta",
              "Beijing, Chongqing, Hong Kong, and Urumqi",
              "Belgrade, Bratislava, Budapest, Ljubljana, and Prague",
              "Bogota, Lima, and Quito",
              "Brasilia",
              "Brisbane",
              "Brussels, Copenhagen, Madrid, and Paris",
              "Bucharest",
              "Buenos Aires and Georgetown",
              "Cairo",
              "Canberra, Melbourne, and Sydney",
              "Cape Verde Island",
              "Caracas and La Paz (Bolivia)",
              "Casablanca and Monrovia",
              "Central America",
              "Central Time U.S. and Canada",
              "Chennai, Kolkata, Mumbai, and New Delhi",
              "Chihuahua, La Paz (Mexico), and Mazatlan",
              "Darwin",
              "Eastern Time U.S. and Canada",
              "Ekaterinburg",
              "Fiji, Kamchatka, and Marshall Island",
              "Greenland",
              "Greenwich Mean Time, Dublin, Edinburgh, Lisbon, and London",
              "Guadalajara, Mexico City, and Monterrey",
              "Guam and Port Moresby",
              "Harare and Pretoria",
              "Hawaii",
              "Helsinki, Kyiv, Riga, Sofia, Tallinn, and Vilnius",
              "Hobart",
              "Indiana (East)",
              "International Date Line (West)",
              "Irkutsk and Ulaanbaatar",
              "Islamabad, Karachi, and Tashkent",
              "Jerusalem",
              "Kabul",
              "Kathmandu",
              "Krasnoyarsk",
              "Kuala Lumpur and Singapore",
              "Kuwait and Riyadh",
              "Magadan, Solomon Islands, and New Caledonia",
              "Mid-Atlantic",
              "Midway Island and Samoa",
              "Moscow, St Petersburg, and Volgograd",
              "Mountain Time U.S. and Canada",
              "Nairobi",
              "Newfoundland",
              "Nuku'alofa",
              "Osaka, Sapporo, and Tokyo",
              "Pacific Time, U.S. and Canada, and Tijuana",
              "Perth",
              "Rangoon",
              "Santiago",
              "Sarajevo, Skopie, Warsaw, and Zagreb",
              "Saskatchewan",
              "Seoul",
              "Magadan, Solomon Islands, and New Caledonia",
              "Sri Jayawardenepura",
              "Taipei",
              "Tehran",
              "Vladivostok",
              "West Central Africa",
              "Yakutsk"
            ]
          },
          "default": "BelgradeBratislavaBudapestLjubljanaPrague"
        },
        "period": {
          "title": "Report Period",
          "type": "string",
          "default": "Last14Days",
          "enum": [
            "CustomTimeRange",
            "Last14Days",
            "Last30Days",
            "LastFourWeeks",
            "LastFourWeeksStartingMonday",
            "LastMonth",
            "LastSevenDays",
            "LastSixMonths",
            "LastThreeMonths",
            "LastWeek",
            "LastWeekStartingMonday",
            "LastYear",
            "ThisMonth",
            "ThisWeek",
            "ThisWeekStartingMonday",
            "ThisYear",
            "Today",
            "Yesterday"
          ],
          "propertyOrder": 20
        },
        "date_from": {
          "type": "string",
          "title": "Date From",
          "default": "1 week ago",
          "description": "Start date of the report. Either date in YYYY-MM-DD format or a relative date string i.e. 5 days ago, 1 month ago, yesterday, etc. Can also be specified as `last run` to start the reporting period at the time of last extraction (this cannot be done in case of the first run for obvious reasons).",
          "options": {
            "dependencies": {
              "period": "CustomTimeRange"
            }
          },
          "propertyOrder": 40
        },
        "date_to": {
          "type": "string",
          "title": "Date To",
          "default": "now",
          "description": "End date of the report. Either date in YYYY-MM-DD format or relative date string i.e. 5 days ago, 1 month ago, yesterday, etc.",
          "options": {
            "dependencies": {
              "period": "CustomTimeRange"
            }
          },
          "propertyOrder": 50
        }
      }
    },
    "return_only_complete_data": {
      "title": "Return only complete data",
      "description": "Determines whether or not the service must ensure that all the data has been processed and is available. If checked, and the requested data are (partially) incomplete or unavailable, an error will be raised.",
      "type": "boolean",
      "format": "checkbox",
      "default": true,
      "propertyOrder": 30
    }
  }
}